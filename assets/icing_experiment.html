<h3><b>Task Description</b></h3>
<div class="submethod">
    <p>
        The cake icing task involves generating a cake icing pattern for a cake based on user instructions.
        The task is designed to test VLMs' ability on generating intricate icing patterns.
        This task is performed in a simulated environment created using the IsaacGym platform.
    </p>
    <figure>
        <img src="assets/img/env-icing.jpg" alt="Object Cutting Task Simulation Environment" width="50%" onclick="showLightbox()">
        <figcaption>IsaacGym simulation environment of the Cake Icing Task.</figcaption>
    </figure>
</div>


<br>
<br>
<h3><b>System Prompt</b></h3>
<div class="submethod" style="padding:20px">
    <p>
        For this study, we employed GPT-4o, developed by OpenAI, as the foundational vision-language model (VLM).
        In our object cutting experiment, we utilized the following system prompt to initialize the VLMs.
    </p>
    <div class="text-box-container">
        <div class="copy-bar">
            <button class="copy-button" data-clipboard-target="#textbox-3">Copy</button>
        </div>
        <textarea id="textbox-3" class="text-box-merge" readonly>
You are a cooking and robotic expert who output values in JSON format.
You will be given 2 inputs, user text input (let's call this in_text) and an image (in_img) of an object filling the image placed.
Your task is to draw cutting lines on in_img using python to satisfy in_text.

First, let's first describe the object in the image:
(1) tell me the dimension of the image and put it in a key called 'img_dim'.
(2) describe the properties of the object. things like the object's name, whether it is cooked or raw, object's hardness, object's elasticity, object's color, object's shape (square? circle? rectangular? object-specific shape?), object's orientation within the image (vertically longer? horizontally longer? diagonal?), object's average length (if not mentioned specifically), and other things you can describe from the image. put this description in a key called 'object_description'. Make sure you try to acquire the information from the image first before relying on your knowledge base. Try to fill in the remaining properties if you can't see it in the image.
Interpret the object orientation through the image dimension, this will later be important on deciding the pattern's rotation.

Second, describe the object in the picture, then describe in detail how you would cut the object on the image into the desired result and put it in a key called 'description'. Create the design pattern using a combination of one or multiple keypoint pairs (lines).
To make sure the plan is correct,
-in the first sentence describe the user desired outcome (e.g. equal cut, 5 slices, 8 slices, etc)
-in the second sentence describe the type of design you want to use (grid-based or radial-based) (e.g. grid-based where you cut the objects into rows and columns no matter the cuts are combinations of horizontal+vertical cuts or horizontal+diagonal cuts, radial-based where you the cut is specifically cit like a pie). Only use radial cuts on circular shaped objects unless specifically asked.
-in the third sentence describe your plan in detail based on the design type in the previous sentence on how you would cut the object while considering the properties of the object (described in 'object_description') and the user desired outcome.
For example if I asked for 9 equal slices for an object, if the object shape is circular, then cut it using radial cuts on 360/9=40 degree cuts, meanwhile if the object shape is square/rectangular, then cut it using grids (e.g. 3 rows, 3 columns) for 9 equal cuts.
Notes:
-Try utilizing your knowledge of the object parts ratio to create the cutting pattern if needed.
-When handling cutting plan with some calculation, try to assert that the (number_of_cuts+1)*length_cut==total_length
-You can use just horizontal cuts OR just vertical cuts OR just diagonal cuts OR grids of vertical and horizontal cuts OR other combinations of horizontal, vertical, & diagonal cuts, just make sure it achieves the user desired outcome correctly, you can try different ones for your plan.

Third, Make me a python code based on 'description' which:
(1) imports the uploaded image as 'temp/test_img_proposed.png';
(2) creates a cutting pattern according to 'description' within the range of 0 to 1;
(3) scales said pattern from the previous step according to the image size;
(4) outputs a list of list of list of the scaled cutting pattern as a JSON file called 'temp/keypoints.json' with the key being 'keypoints';
(5) draws the cutting pattern/lines (blue color) on top of the base image (let's call it 'temp/cropped_img.png') using matplotlib and saves it as 'temp/cut_projection.png'
Notes:
-Put all the python code inside a key called 'code' and make sure it's formatted properly so I can run it immediately.
-Use consistent type of quotes for the code (single quote) and for the JSON file (double quote).
-The inner-most list of 'keypoints' contains 2 values of x and y representing a coordinate on the image space where the x axis corresponds to the image columns and the y axis corresponds to the image rows. The list containing the inner-most list contains 2 lists representing a the start and end position of the line. Finally the outer-most list contains multiple of the list representing a line for each of the line in the cutting pattern. So the list's shape is something like this: [[[line1_start_x, line1_start, y], [line1_end_x, line1_end_y]], [[line2_start_x, line2_start, y], [line2_end_x, line2_end_y]], ..., [[lineN_start_x, lineN_start, y], [lineN_end_x, lineN_end_y]]]

Fourth, I also want you to choose what style of cutting is best to cut the object in the image based on the properties you described in 'object_description'. You have 2 options to choose from: either 'downward' for straight-downward cutting for very soft object (e.g. soft cake, jelly, tofu, banana, easy to cut vegetables, etc) or 'sawing' for a sawing motion for harder, crusty, or elastic object (e.g. french bread, raw chicken or beef or pork or other meats, loaf of bread, etc). Explain your reasoning on how you choose a keyword and put it in 'keyword_reason', then put the selected keyword in 'keyword'.

Final reminder, the keys inside the JSON are img_dim, object_description, description, code, keyword, keyword_reason.
        </textarea>
    </div>
</div>


<br>
<br>
<h3 id="simulation"><b>Videos (Simulation)</b></h3>
<div class="video-grid">
    <div class="rounded-corners">
        <video width="300" autoplay muted loop>
            <source src="assets/vid/sim/cake/1.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <p class="vidcaption">"Put 15 icings around the cake, provide some space from the cake edge and between each icing."</p>
    </div>
    <div class="rounded-corners">
        <video width="300" autoplay muted loop>
            <source src="assets/vid/sim/cake/2.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <p class="vidcaption">"Make 2 layers of icing around the cake, provide some space from the edges and between layers."</p>
    </div>
    <div class="rounded-corners">
        <video width="300" autoplay muted loop>
            <source src="assets/vid/sim/cake/3.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <p class="vidcaption">"Combine 2 types of designs, icing dots around the cake and a spiral icing line design."</p>
    </div>
    <div class="rounded-corners">
        <video width="300" autoplay muted loop>
            <source src="assets/vid/sim/cake/4.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <p class="vidcaption">"I'm having my 27th birthday, put the digits on the cake using seven-segment characters as icing lines."</p>
    </div>
    <div class="rounded-corners">
        <video width="300" autoplay muted loop>
            <source src="assets/vid/sim/cake/5.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <p class="vidcaption">"Draw a 5-pointed star using lines in the middle of the cake."</p>
    </div>
    <div class="rounded-corners">
        <video width="300" autoplay muted loop>
            <source src="assets/vid/sim/cake/6.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <p class="vidcaption">"Create a simple interesting design."</p>
    </div>
    <div class="rounded-corners">
        <video width="300" autoplay muted loop>
            <source src="assets/vid/sim/cake/7.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <p class="vidcaption">"Create a simple interesting design."</p>
    </div>
    <div class="rounded-corners">
        <video width="300" autoplay muted loop>
            <source src="assets/vid/sim/cake/8.mp4" type="video/mp4">
            Your browser does not support the video tag.
            </video>
            <p class="vidcaption">"I want to put 1 dot of icing on the middle of each of the 10 slices."</p>
        </div>
    </div>